{
  "name": "Email_Sender_Agent",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -512,
        -112
      ],
      "id": "1cf652b2-dda0-4406-9430-e976895d4625",
      "name": "When chat message received",
      "webhookId": "d76ee9ce-5414-4a61-aba5-be99b21a891a"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "From the chat window input, identify the full name of the person whose email address is needed.\n\nUse Google Contacts to search and retrieve email addresses that match this name.\n\nProceed only if a single, unique email address is found; otherwise, do not send any email.\n\nIf a unique email is found, send one email using Gmail with the intended message content.\n\nConfirm that exactly one email is sent for each request to prevent duplicates.\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -176,
        -112
      ],
      "id": "f2bb55bc-9d0c-48d9-a3a2-6d59b0974a2e",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -288,
        112
      ],
      "id": "3c48ae3f-500f-4645-8533-864c83139184",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "ZqhzU0kTRBq3x3Be",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -160,
        112
      ],
      "id": "53ab69a1-0ffe-4b36-a1d0-00ac6198de26",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "sendTo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('To', ``, 'string') }}",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        -32,
        112
      ],
      "id": "5c6e3751-a936-44c2-a9dc-234f169d96af",
      "name": "Send a message in Gmail",
      "webhookId": "baf3c80e-71ca-4c7b-8d78-b156fa0633f3",
      "credentials": {
        "gmailOAuth2": {
          "id": "dPfyCbJQsJB7aIHt",
          "name": "Gmail account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "limit": 1,
        "fields": [
          "emailAddresses",
          "names"
        ],
        "useQuery": true,
        "query": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Query', ``, 'string') }}"
      },
      "type": "n8n-nodes-base.googleContactsTool",
      "typeVersion": 1,
      "position": [
        144,
        112
      ],
      "id": "634568a6-475d-434f-b9c9-5991f0d64743",
      "name": "Get many contacts in Google Contacts",
      "credentials": {
        "googleContactsOAuth2Api": {
          "id": "KUN33rEjc7vbWpVT",
          "name": "Google Contacts account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Send a message in Gmail": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get many contacts in Google Contacts": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "d30c93fb-9af5-42ce-9d5e-f87f0f61caa2",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "47ced7fefb5fde9fdc884624b26e008f6672c2d303905738fb38ec25386deb27"
  },
  "id": "YQjG3GpKmsKr6crZ",
  "tags": []
}